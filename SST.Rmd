---
title: "sst"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(here)
library(tidyverse)
library(janitor)
library(ggExtra)
library(patchwork)



```

# Read in Data from Aqua Modis

```{r}
raw_sst <- read_csv(here("/Users", "eisaguirre", "github", "SST", "data", "SST.csv"))




```

# clean data

```{r}

sst <- raw_sst[-c(2)] 
  
clean_sst <- sst[-c(1),] 

mut_sst <- clean_sst %>% 
  mutate(data.frame(longitude = as.numeric(clean_sst$longitude))) %>% 
  mutate(data.frame(latitude = as.numeric(clean_sst$latitude))) %>% 
  mutate(data.frame(sst = as.numeric(clean_sst$sst))) %>% 
  filter(sst > 0)

final_sst <- mut_sst %>% 
  mutate(sst = (sst * (9/5) + 32 ))
  


```

# plot
```{r}
sst_plot <- ggplot(final_sst, aes(y=latitude, x=longitude)) +
  geom_raster(aes(fill = sst), 
              show.legend = T, 
              interpolate = T, 
              hjust = 1, 
              vjust = 1) +
  scale_fill_viridis_c(option = "plasma", begin = 0) +
  theme_light() +
  labs(x = "Longitude",
       y = "Latitude",
       title = "3 Day Composite",
       fill = "Sea Surface 
Temperature (F)") +
  theme(panel.grid = element_line(F),
        legend.position = "bottom",
        panel.background = element_rect(fill = "grey70"),
        axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +
  scale_x_continuous(breaks = c(-120.5, -120.25, -120, -119.75, -119.5, -119.25, -119), 
                     expand = c(0,0)) +
  scale_y_continuous(breaks = c(33.25, 33.5, 33.75, 34, 34.25, 34.5),
                                        expand = c(0,0))
  
  


  
  
  
  
  

```


```{r}
raw_chloro <- read_csv(here("/Users", "eisaguirre", "github", "SST", "data", "Chloro.csv"))

```

```{r}

chloro <- raw_chloro[-c(2)] 
  
clean_chloro <- chloro[-c(1),] 

final_chloro <- clean_chloro %>% 
  mutate(data.frame(longitude = as.numeric(clean_chloro$longitude))) %>% 
  mutate(data.frame(latitude = as.numeric(clean_chloro$latitude))) %>% 
  mutate(data.frame(chlorophyll = as.numeric(clean_chloro$chlorophyll))) %>% 
  filter(chlorophyll < 5 )


#final_chloro <- mut_chloro[!(mut_chloro$chlorophyll>3),]


```

```{r}

chloro_plot <- ggplot(final_chloro, aes(y=latitude, x=longitude)) +
  geom_raster(aes(fill = chlorophyll), 
              show.legend = T, 
              interpolate = T, 
              hjust = 1, 
              vjust = 1) +
  scale_fill_viridis_c(option = "turbo") +
  theme_light() +
  labs(x = "Longitude",
       y = "",
       fill = "Chlorophyll
(mg m^-3)") +
  theme(panel.grid = element_line(F),
        panel.background = element_rect(fill = "grey70"),
        legend.position = "bottom",
        axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +
  scale_x_continuous(breaks = c(-120.5, -120.25, -120, -119.75, -119.5, -119.25, -119), 
                     expand = c(0,0)) +
  scale_y_continuous(breaks = c(33.25, 33.5, 33.75, 34, 34.25, 34.5), 
                                expand = c(0,0))
  
sst_plot + chloro_plot
  
```  

